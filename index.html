<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Customer App</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <style>
    /* Simple modal style override */
    #edit-modal {
      display: none;
      position: fixed;
      z-index: 1050;
      top: 0; left: 0; right: 0; bottom: 0;
      background: rgba(0,0,0,0.5);
      overflow-y: auto;
    }
    #edit-modal .modal-dialog {
      margin: 100px auto;
    }
  </style>
</head>
<body>
  <div class="container my-4">
    <header class="d-flex justify-content-between align-items-center mb-4">
      <h1>Customers</h1>
      <button id="logout-btn" class="btn btn-danger">Logout</button>
    </header>

    <section class="mb-4">
      <form id="customer-form" class="needs-validation" novalidate>
        <div class="mb-3">
          <label for="name" class="form-label">Full Name *</label>
          <input type="text" id="name" class="form-control" required />
          <div class="invalid-feedback">Please enter a name.</div>
        </div>

        <div class="mb-3">
          <label for="email" class="form-label">Email (optional)</label>
          <input type="email" id="email" class="form-control" />
        </div>

        <div id="phones-container" class="mb-3">
          <label class="form-label">Phones *</label>
          <input type="text" class="phone-input form-control mb-2" placeholder="Phone (required)" required />
          <button type="button" id="add-phone-btn" class="btn btn-secondary btn-sm">Add Phone</button>
        </div>

        <div id="addresses-container" class="mb-3">
          <label class="form-label">Addresses</label>
          <input type="text" class="address-input form-control mb-2" placeholder="Address" />
          <input type="text" class="location-input form-control mb-2" placeholder="Location Link" />
          <button type="button" id="add-address-btn" class="btn btn-secondary btn-sm">Add Address</button>
        </div>

        <div class="mb-3">
          <label for="notes" class="form-label">Notes</label>
          <textarea id="notes" class="form-control" rows="3"></textarea>
        </div>

        <button type="submit" class="btn btn-primary">Add Customer</button>
      </form>
    </section>

    <section class="mb-4">
      <div class="row g-2 align-items-center mb-3">
        <div class="col-12 col-md-4">
          <input type="search" id="search" class="form-control" placeholder="Search customers..." />
        </div>
        <div class="col-6 col-md-3">
          <select id="sort-by" class="form-select">
            <option value="created_at">Sort by Created Date</option>
            <option value="full_name">Sort by Name</option>
            <option value="email">Sort by Email</option>
          </select>
        </div>
        <div class="col-6 col-md-3">
          <select id="sort-dir" class="form-select">
            <option value="desc">Descending</option>
            <option value="asc">Ascending</option>
          </select>
        </div>
      </div>

      <ul id="customer-list" class="list-group mb-3"></ul>

      <nav aria-label="Page navigation">
        <ul class="pagination justify-content-center">
          <li class="page-item">
            <button id="prev-page" class="page-link">Previous</button>
          </li>
          <li class="page-item disabled">
            <span id="page-info" class="page-link">Page 1 of 1</span>
          </li>
          <li class="page-item">
            <button id="next-page" class="page-link">Next</button>
          </li>
        </ul>
      </nav>
    </section>
  </div>

  <!-- Edit Customer Modal -->
  <div id="edit-modal" class="modal" tabindex="-1" aria-hidden="true" aria-modal="true" role="dialog">
    <div class="modal-dialog">
      <div class="modal-content p-3 bg-white rounded">
        <h3>Edit Customer</h3>
        <form id="edit-form" class="needs-validation" novalidate>
          <div class="mb-3">
            <label for="edit-name" class="form-label">Full Name *</label>
            <input type="text" id="edit-name" class="form-control" required />
            <div class="invalid-feedback">Please enter a name.</div>
          </div>
          <div class="mb-3">
            <label for="edit-email" class="form-label">Email</label>
            <input type="email" id="edit-email" class="form-control" />
          </div>
          <div id="edit-phones-container" class="mb-3">
            <label class="form-label">Phones</label>
            <!-- phones inputs inserted dynamically -->
            <button type="button" id="edit-add-phone-btn" class="btn btn-secondary btn-sm mt-1">Add Phone</button>
          </div>
          <div id="edit-addresses-container" class="mb-3">
            <label class="form-label">Addresses</label>
            <!-- addresses inputs inserted dynamically -->
            <button type="button" id="edit-add-address-btn" class="btn btn-secondary btn-sm mt-1">Add Address</button>
          </div>
          <div class="mb-3">
            <label for="edit-notes" class="form-label">Notes</label>
            <textarea id="edit-notes" class="form-control" rows="3"></textarea>
          </div>
          <button type="submit" class="btn btn-primary">Save</button>
          <button type="button" id="edit-cancel-btn" class="btn btn-secondary ms-2">Cancel</button>
        </form>
      </div>
    </div>
  </div>

  <script type="module" src="app.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
